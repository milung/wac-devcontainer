apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component

resources:
- deployment.yaml
- service.yaml
- pvc.yaml

configMapGenerator:
 - name: mongodb-connection
   literals:
    - host=mongodb
    - port=27017

secretGenerator:
  - name: mongodb-auth
    literals:
    - username=admin
    - password=admin

- path: patches/webapi.deployment.patch.yaml
  target:
    group: apps
    version: v1
    kind: Deployment
    name: ${templateOption:pfx}-ambulance-webapi

